<div class="event-new">
  <h1 class="event-new__title">イベント詳細</h1>

  <div class="event-new__card">
    <%= render "detail", event: @event %>
  </div>

  <!-- 編集/削除（主催者だけ） -->
  <div class="event-show__actions">
    <% if logged_in? && @event.user_id == current_user.id %>
      <%= link_to "編集", edit_event_path(@event), class: "event-show__btn event-show__btn--primary" %>

      <%= button_to "削除",
            event_path(@event),
            method: :delete,
            form: { data: { turbo_confirm: "本当に削除しますか？" } },
            class: "event-show__btn event-show__btn--danger" %>
    <% end %>
  </div>

  <!-- 参加（ログインしていれば表示） -->
  <% if logged_in? %>
  <div class="event-cta-wrapper">
    <% if @event.user_id == current_user.id %>
      <%= link_to "参加者のコーディネート一覧",
            participant_posts_event_path(@event),
            class: "event-cta__btn" %>

      <div class="event-cta__btn event-cta__btn--cancel event-cta__btn--static">
        主催者
      </div>

    <% elsif current_user.participating_events.exists?(@event.id) %>
      <%= link_to "参加者のコーディネート一覧",
            participant_posts_event_path(@event),
            class: "event-cta__btn" %>

      <%= button_to "参加済み（取消）",
            event_participation_path(@event),
            method: :delete,
            class: "event-cta__btn event-cta__btn--cancel" %>

    <% else %>
      <%= button_to "このイベントに参加する",
            event_participation_path(@event),
            method: :post,
            class: "event-cta__btn" %>
    <% end %>

    <p class="event-cta__note">
      イベントに参加すると、みんなのコーディネートを見ることができます。
    </p>
  </div>
<% end %>

  <!-- 一覧に戻る -->
  <div class="event-footer">
    <%= link_to "一覧に戻る", events_path, class: "event-back-link" %>
  </div>
</div>
